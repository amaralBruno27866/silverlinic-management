<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <title>SLT - Case Information</title>
</head>

<style>
  /* ========================= */
  /*       Global Styles       */
  /* ========================= */

  :root{
    --primary-color: #00325c;
    --secondary-color: #00335cb6;
    --third-color: #00335c3b;
    --success-color: #18c427;
    --success-color-hover: #16a125;
    --error-color: #ff4d4f;
    --error-color-hover: #ff1a1a;
    --warning-color: #ffcc00;
    --warning-color-hover: #e6b800;
    --info-color: #1890ff;
    --info-color-hover: #007acc;
    --background-color: #c4c4c4;
    --background-form: #ffffff;
    --text-color-1: #222222;
    --text-color-2: #d3d3d3;

    --font-family: 'Roboto', sans-serif;
    --font-size: 1rem;
    --font-weight: 400;
  }

  /* ========================= */
  /*      General Body         */
  /* ========================= */
  body {
    font-family: var(--font-family);
    font-size: var(--font-size);
    font-weight: var(--font-weight);
    margin: 1rem auto;
    padding: 1rem;
    background: var(--background-color);
    max-width: 75rem;
    max-height: 100vh;
  }

  form {
    background: var(--background-form);
    border-radius: 0.5rem;
    padding: 1rem;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
  }

  .form-header {
    background-color: var(--primary-color);
    color: var(--text-color-2);
    padding: 1rem;
    text-align: center;
    border-radius: 0.5rem;
  }

  /* ========================= */
  /*      Fieldset Styles      */
  /* ========================= */
  fieldset {
    border: 1px solid var(--third-color);
    border-radius: 0.5rem;
    padding: 1.5rem 1.5rem 1rem 1.5rem;
    margin-bottom: 1.5rem;
    background: #f9f9f9;
  }

  legend {
    font-size: 1.35rem;
    font-weight: 700;
    color: var(--primary-color);
    padding: 0 0.5rem;
    margin-bottom: 0.5rem;
    width: auto;
    letter-spacing: 0.5px;
  }

  /* ========================= */
  /*      Form Layout          */
  /* ========================= */
  .case-info,
  .assessor-info,
  .client-info,
  .personal-info,
  .client-address,
  .family-physician-info,
  .emergency-contact-info,
  .legal-representative-info,
  .insurance-company-info {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  label {
    font-weight: 500;
    margin-bottom: 0.2rem;
    color: var(--primary-color);
  }

  input[type="text"],
  input[type="email"],
  input[type="tel"],
  input[type="date"],
  select {
    padding: 0.5rem 0.75rem;
    border: 1px solid #bfc9d1;
    border-radius: 0.35rem;
    font-size: 1rem;
    background: #fff;
    color: var(--text-color-1);
    transition: border-color 0.2s;
    margin-bottom: 0.5rem;
  }

  input[readonly] {
    background: #f1f1f1;
    color: #888;
    cursor: not-allowed;
  }

  input:focus,
  select:focus {
    border-color: var(--primary-color);
    outline: none;
    background: #f0f6fa;
  }

  /* Ajuste para selects */
  select {
    min-height: 2.5rem;
  }

  /* Espaçamento entre fieldsets aninhados */
  .client-info fieldset,
  .client-info .client-address,
  .client-info .personal-info {
    margin-bottom: 1rem;
    background: #f5f7fa;
  }

  /* Footer já está estilizado */
  .form-footer {
    background-color: var(--primary-color);
    color: var(--text-color-2);
    padding: 1rem;
    text-align: center;
    border-radius: 0.5rem;
    margin-top: 1rem;
  }

  /* ========================= */
  /*      Button Styles        */
  /* ========================= */
  .button-container {
    display: flex;
    gap: 1rem;
    justify-content: center;
    margin: 2rem 0 1rem 0;
    flex-wrap: wrap;
  }

  .form-action-btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    background-color: var(--primary-color);
    color: #fff;
    border: none;
    border-radius: 0.35rem;
    padding: 0.6rem 1.5rem;
    font-size: 1.08rem;
    font-weight: 500;
    cursor: pointer;
    transition: background 0.2s, box-shadow 0.2s;
    box-shadow: 0 2px 8px #00325c1a;
  }

  .form-action-btn:disabled {
    background-color: #bfc9d1;
    color: #eee;
    cursor: not-allowed;
    box-shadow: none;
    opacity: 0.7;
  }

  .form-action-btn:hover:not(:disabled),
  .form-action-btn:focus:not(:disabled) {
    background-color: var(--secondary-color);
    color: #fff;
    outline: none;
  }

  @media (max-width: 767px) {
    .button-container {
      flex-direction: column;
      gap: 0.75rem;
      margin: 1.2rem 0 0.5rem 0;
    }
    .form-action-btn {
      width: 100%;
      justify-content: center;
      font-size: 1rem;
      padding: 0.55rem 1rem;
    }
  }

  /* ========================= */
  /*      Responsividade       */
  /* ========================= */

  /* Laptops: 1920x1080 até 1280x720 */
  @media (max-width: 1920px) and (min-width: 1280px) {
    body {
      font-size: 1.1rem;
    }
    /* Adicione regras específicas para laptops aqui */
  }

  /* Tablets: 1279px até 768px */
  @media (max-width: 1279px) and (min-width: 768px) {
    body {
      font-size: 1rem;
      padding: 0 1rem;
    }
    /* Adicione regras específicas para tablets aqui */
  }

  /* Smartphones: até 767px */
  @media (max-width: 767px) {
    body {
      font-size: 0.95rem;
      padding: 0 0.5rem;
    }
    /* Adicione regras específicas para smartphones aqui */
  }

</style>

<body>
  <form>
    <header>
      <fieldset class="form-header">
        <h1 style="margin: 0;">Silver Linings Therapy And Assessment Services</h1>
        <p style="margin: 0;">2 Andres St, Niagara on the Lake, Ontario, L0S 1J0</p>
        <p style="margin: 0;"><i class="bi bi-telephone"></i> +1 (416) 937 - 6902 | Fax: +1 (647) 793 - 4140</p>
        <p style="margin: 0;"><i class="bi bi-envelope"></i> silverliningsassociates@gmail.com</p>
      </fieldset>
    </header>
    <!-- Main Content  -->

    <!-- Case information  -->
    <fieldset class="case-info">
      <legend>Case Information</legend>
      <label for="case-id">Case ID:</label>
      <input type="text" id="case-id" name="case-id" class="case-info-input" readonly>
      <label for="created-at">Created at:</label>
      <input type="text" id="created-at" name="created-at" class="case-info-input" readonly>
    </fieldset>

    <!-- Assessor Information  -->
     <fieldset class="assessor-info">
      <legend>Assessor Information</legend>
      <label for="assessor-id" class="assessor-info-label">Assessor ID:</label>
      <input type="text" id="assessor-id" name="assessor-id" class="assessor-info-input" readonly>

      <label for="assessor-name" class="assessor-info-label">Name: </label>
      <input type="text" id="assessor-name" name="assessor-name" class="assessor-info-input" readonly>

      <label for="assessor-email" class="assessor-info-label">Email:</label>
      <input type="text" id="assessor-email" name="assessor-email" class="assessor-info-input" readonly>

      <label for="assessor-telephone" class="assessor-info-label">Telephone:</label>
      <input type="text" id="assessor-telephone" name="assessor-telephone" class="assessor-info-input" readonly>
     </fieldset>

     <!-- Client information  -->
      <fieldset class="client-info">
        <legend>Client Information</legend>
        <!-- Client information  -->
        <fieldset class="personal-info">
          <legend>Personal Information</legend>
          <label for="client-firstname" >Firstname:</label>
          <input type="text" id="client-firstname" name="client-firstname" class="client-info-input" placeholder="Enter first name" required data-question="1">

          <label for="client-lastname" >Lastname:</label>
          <input type="text" id="client-lastname" name="client-lastname" class="client-info-input" placeholder="Enter last name" required data-question="2">

          <label for="client-email">Email:</label>
          <input type="text" id="client-email" name="client-email" class="client-info-input" placeholder="Enter email" required data-question="3">

          <label for="client-telephone">Telephone:</label>
          <input type="text" id="client-telephone" name="client-telephone" class="client-info-input" placeholder="Enter telephone" required data-question="4">
        </fieldset>
        <!-- Client address  -->
         <fieldset class="client-address">
          <legend>Address</legend>
          <label for="client-address">Address:</label>
          <input type="text" id="client-address" name="client-address" class="client-info-input" placeholder="Enter address" required data-question="5">
          <label for="client-city">City:</label>
          <input type="text" id="client-city" name="client-city" class="client-info-input" placeholder="Enter city" required data-question="6">
          <label for="client-province">Province:</label>
          <select id="client-province" name="client-province" class="client-info-input" required data-question="7">
            <option value="">Select</option>
            <option value="AB">Alberta</option>
            <option value="BC">British Columbia</option>
            <option value="MB">Manitoba</option>
            <option value="NB">New Brunswick</option>
            <option value="NL">Newfoundland and Labrador</option>
            <option value="NS">Nova Scotia</option>
            <option value="ON">Ontario</option>
            <option value="PE">Prince Edward Island</option>
            <option value="QC">Quebec</option>
            <option value="SK">Saskatchewan</option>
          </select>
          <label for="client-postal-code">Postal Code:</label>
          <input type="text" id="client-postal-code" name="client-postal-code" class="client-info-input" placeholder="Enter postal code" required data-question="8">
         </fieldset>
      </fieldset>

      <!-- Family Physician -->
      <fieldset class="family-physician-info">
        <legend>Family Physician</legend>
        <label for="physician-name" class="form-info-label">Full Name:</label>
        <input type="text" id="physician-name" name="physician-name" class="form-info-input" placeholder="Enter physician's name" required data-question="9">

        <label for="physician-phone" class="form-info-label">Phone:</label>
        <input type="tel" id="physician-phone" name="physician-phone" class="form-info-input" placeholder="(XXX) XXX-XXXX" required data-question="10">

        <label for="physician-email" class="form-info-label">Email:</label>
        <input type="email" id="physician-email" name="physician-email" class="form-info-input" placeholder="Enter physician's email" required data-question="11">

        <label for="physician-address" class="form-info-label">Street:</label>
        <input type="text" id="physician-address" name="physician-address" class="form-info-input" placeholder="Enter street address" required data-question="12">

        <label for="physician-city" class="form-info-label">City:</label>
        <input type="text" id="physician-city" name="physician-city" class="form-info-input" placeholder="Enter city" required data-question="13">

        <label for="physician-province" class="form-info-label">Province:</label>
        <select id="physician-province" name="physician-province" class="form-info-select" required data-question="14">
          <option value="">Select</option>
          <option value="AB">Alberta</option>
          <option value="BC">British Columbia</option>
          <option value="MB">Manitoba</option>
          <option value="NB">New Brunswick</option>
          <option value="NL">Newfoundland and Labrador</option>
          <option value="NS">Nova Scotia</option>
          <option value="ON">Ontario</option>
          <option value="PE">Prince Edward Island</option>
          <option value="QC">Quebec</option>
          <option value="SK">Saskatchewan</option>
        </select>

        <label for="physician-postal-code" class="form-info-label">Postal Code:</label>
        <input type="text" id="physician-postal-code" name="physician-postal-code" class="form-info-input" placeholder="Enter postal code" required data-question="15">
      </fieldset>

      <!-- Emergency Contact -->
      <fieldset class="emergency-contact-info">
        <legend>Emergency Contact</legend>
        <label for="emergency-name" class="form-info-label">Full Name:</label>
        <input type="text" id="emergency-name" name="emergency-name" class="form-info-input" placeholder="Enter emergency contact name" required data-question="16">

        <label for="emergency-relationship" class="form-info-label">Relationship:</label>
        <input type="text" id="emergency-relationship" name="emergency-relationship" class="form-info-input" placeholder="Enter relationship" required data-question="17">

        <label for="emergency-phone" class="form-info-label">Phone:</label>
        <input type="tel" id="emergency-phone" name="emergency-phone" class="form-info-input" placeholder="(XXX) XXX-XXXX" required data-question="18">

        <label for="emergency-alt-phone" class="form-info-label">Alternative Phone:</label>
        <input type="tel" id="emergency-alt-phone" name="emergency-alt-phone" class="form-info-input" placeholder="(XXX) XXX-XXXX" data-question="19">
      </fieldset>

      <!-- Legal Representative Info -->
      <fieldset class="legal-representative-info">
        <legend>Legal Representative Information</legend>
        <label for="legal-company-name" class="form-info-label">Company Name:</label>
        <input type="text" id="legal-company-name" name="legal-company-name" class="form-info-input" placeholder="Enter company name" required data-question="20">

        <label for="legal-full-name" class="form-info-label">Full Name:</label>
        <input type="text" id="legal-full-name" name="legal-full-name" class="form-info-input" placeholder="Enter representative's name" required data-question="21">

        <label for="legal-phone" class="form-info-label">Phone:</label>
        <input type="tel" id="legal-phone" name="legal-phone" class="form-info-input" placeholder="(XXX) XXX-XXXX" required data-question="22">

        <label for="legal-email" class="form-info-label">Email:</label>
        <input type="email" id="legal-email" name="legal-email" class="form-info-input" placeholder="Enter representative's email" required data-question="23">
      </fieldset>

      <!-- Insurance Company Info -->
      <fieldset class="insurance-company-info">
        <legend>Insurance Company Information</legend>
        <label for="insurance-company-name" class="form-info-label">Company Name:</label>
        <input type="text" id="insurance-company-name" name="insurance-company-name" class="form-info-input" placeholder="Enter company name" required data-question="24">

        <label for="insurance-adjuster-name" class="form-info-label">Adjuster Name:</label>
        <input type="text" id="insurance-adjuster-name" name="insurance-adjuster-name" class="form-info-input" placeholder="Enter adjuster's name" required data-question="25">

        <label for="insurance-phone" class="form-info-label">Phone:</label>
        <input type="tel" id="insurance-phone" name="insurance-phone" class="form-info-input" placeholder="(XXX) XXX-XXXX" required data-question="26">

        <label for="insurance-email" class="form-info-label">Email:</label>
        <input type="email" id="insurance-email" name="insurance-email" class="form-info-input" placeholder="Enter email address" required data-question="27">

        <label for="insurance-claim" class="form-info-label">Claim Number:</label>
        <input type="text" id="insurance-claim" name="insurance-claim" class="form-info-input" placeholder="Enter claim number" required data-question="28">

        <label for="insurance-policy" class="form-info-label">Policy Number:</label>
        <input type="text" id="insurance-policy" name="insurance-policy" class="form-info-input" placeholder="Enter policy number" required data-question="29">

        <label for="insurance-date-accident" class="form-info-label">Date of Accident:</label>
        <input type="date" id="insurance-date-accident" name="insurance-date-accident" class="form-info-input" required data-question="30">
      </fieldset>

      <!-- Buttons for saving, sending, and printing the form -->
      <div class="button-container">
        <button type="button" id="save-btn" class="form-action-btn">
          <i class="bi bi-save"></i> Save
        </button>
        <!-- Removido botão Send -->
        <!-- Removido botão Print -->
      </div> 

      <footer class="form-footer" style="margin-top:2rem;">
        <div class="footer-contact" style="text-align:center;">
          <p style="margin:0;"><i class="bi bi-envelope"></i> silverliningsassociates@gmail.com</p>
        </div>
        <div class="footer-info" style="text-align:center;">
          <p style="margin:0;">&copy; <span id="copyright-year"></span> Silver Linings Therapy And Assessment Services. All rights reserved.</p>
          <p style="margin:0;">Website by Beagle Tech</p>
        </div>
      </footer>
  </form>
  <script>
    // Atualiza o ano automaticamente
    document.getElementById('copyright-year').textContent = new Date().getFullYear();

    // Função para capitalizar cada palavra
    function capitalizeWords(str) {
      return str.replace(/\w\S*/g, function(txt){
        return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
      });
    }

    // Função para formatar o postal code
    function formatPostalCode(str) {
      str = str.replace(/\s+/g, '').toUpperCase();
      if (str.length === 6) {
        return str.slice(0,3) + ' ' + str.slice(3);
      }
      return str;
    }

    // Postal code fields
    const postalFields = [
      'client-postal-code',
      'physician-postal-code'
    ];

    // Campos que devem ser capitalizados (nomes, cidades, empresas, etc)
    const capitalizeFields = [
      'client-firstname', 'client-lastname', 'client-address', 'client-city',
      'physician-name', 'physician-address', 'physician-city',
      'emergency-name',
      'legal-company-name', 'legal-full-name',
      'insurance-company-name', 'insurance-adjuster-name'
    ];

    // Habilita/desabilita botões conforme obrigatórios preenchidos
    function checkRequiredFields() {
      const requiredInputs = document.querySelectorAll('input[required], select[required]');
      let allFilled = true;
      requiredInputs.forEach(function(input) {
        if (!input.value || (input.tagName === 'SELECT' && input.value === '')) {
          allFilled = false;
        }
      });
      document.getElementById('save-btn').disabled = !allFilled;
      // Removido: document.getElementById('send-btn').disabled = !allFilled;
      // Removido: document.getElementById('print-btn').disabled = !allFilled;
    }

    // Eventos para validar em tempo real
    document.querySelectorAll('input[required], select[required]').forEach(function(input) {
      input.addEventListener('input', checkRequiredFields);
      input.addEventListener('change', checkRequiredFields);
    });

    // Checa ao carregar a página
    checkRequiredFields();

    // Botão Save
    document.getElementById('save-btn').addEventListener('click', function() {
      // Capitalizar campos de nomes
      capitalizeFields.forEach(function(fieldId) {
        const el = document.getElementById(fieldId);
        if (el && el.value) {
          el.value = capitalizeWords(el.value);
        }
      });

      // Formatar postal codes
      postalFields.forEach(function(fieldId) {
        const el = document.getElementById(fieldId);
        if (el && el.value) {
          el.value = formatPostalCode(el.value);
        }
      });

      // Montar CSV usando data-question
      const inputs = document.querySelectorAll('input[data-question], select[data-question]');
      const sorted = Array.from(inputs).sort((a, b) => {
        return Number(a.getAttribute('data-question')) - Number(b.getAttribute('data-question'));
      });

      let csv = '';
      sorted.forEach(function(input) {
        let value = input.value || '';
        if (input.tagName === 'SELECT' && !value) {
          value = input.options[input.selectedIndex]?.text || '';
        }
        csv += `${input.getAttribute('data-question')},${value}\n`;
      });

      // Nome do arquivo: Firstname + Lastname + case-profile.csv
      const firstname = document.getElementById('client-firstname')?.value?.trim().replace(/\s+/g, '_') || 'firstname';
      const lastname = document.getElementById('client-lastname')?.value?.trim().replace(/\s+/g, '_') || 'lastname';
      const filename = `${firstname}_${lastname}_case-profile.csv`;

      // Baixar CSV
      const blob = new Blob([csv], {type: 'text/csv'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    });

    // Removido: lógica do botão Send

    // Removido: lógica do botão Print
  </script>
</body>
</html>